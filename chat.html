<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chat MatemÃ¡tico</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<div class="layout">

  <!-- Sidebar -->
  <nav class="sidebar">
    <h2>Chat MatemÃ¡tico</h2>

    <ul>
      <li class="sidebar-section">Chat</li>
      <li><a href="#chat-box">ConversaciÃ³n</a></li>

      <li class="sidebar-section">NavegaciÃ³n</li>
      <li><a href="index.html">Inicio</a></li>
      <li><a href="U1.html">Unidad 1</a></li>
      <li><a href="U2.html">Unidad 2</a></li>
      <li><a href="formulario.html">Formulario</a></li>
      <li><a href="calculadoras.html">Calculadoras</a></li>
      <li><a href="juegos.html">Minijuegos</a></li>
      <li><a href="config.html">ConfiguraciÃ³n</a></li>
    </ul>

    <div class="theme-toggle">
      <button onclick="toggleTheme()">Modo claro/oscuro</button>
    </div>
  </nav>

  <!-- CONTENIDO -->
  <main class="content">

    <section id="chat-box">
      <h1>Chat MatemÃ¡tico ğŸ¤–</h1>
      <p>Haz preguntas sobre vectores, rectas, planos, polares, paramÃ©tricas y mÃ¡s.</p>

      <div class="chat-box">
        <div id="chat-log" class="chat-log"></div>

        <div class="chat-input-row">
          <input id="chat-input" type="text" placeholder="Escribe tu pregunta aquÃ­..." onkeypress="if(event.key==='Enter') enviarMensaje()">
          <button onclick="enviarMensaje()">Enviar</button>
        </div>
      </div>
    </section>

  </main>

</div>

<script>
/* ===========================
   MODO OSCURO
=========================== */
(function () {
  const saved = localStorage.getItem('theme');
  if (saved === 'dark') document.body.classList.add('dark');
})();
function toggleTheme() {
  document.body.classList.toggle('dark');
  localStorage.setItem('theme',
    document.body.classList.contains('dark') ? 'dark' : 'light'
  );
}

/* ===========================
   SISTEMA DEL CHAT
=========================== */
function enviarMensaje() {
  const input = document.getElementById("chat-input");
  const texto = input.value.trim();
  if (texto === "") return;

  mostrarMensaje(texto, "user");
  input.value = "";

  setTimeout(() => responder(texto), 400);
}

function mostrarMensaje(texto, tipo) {
  const log = document.getElementById("chat-log");

  const mensaje = document.createElement("div");
  mensaje.style.margin = "8px 0";
  mensaje.style.padding = "10px 14px";
  mensaje.style.borderRadius = "12px";
  mensaje.style.maxWidth = "70%";
  mensaje.style.lineHeight = "1.4";

  if (tipo === "user") {
    mensaje.style.background = "var(--accent-soft)";
    mensaje.style.color = "var(--accent)";
    mensaje.style.marginLeft = "auto";
  } else {
    mensaje.style.background = "rgba(255,255,255,0.9)";
    mensaje.style.color = "var(--text-soft)";
    mensaje.style.marginRight = "auto";
  }

  mensaje.textContent = texto;
  log.appendChild(mensaje);
  log.scrollTop = log.scrollHeight;
}

/* ===========================
   RESPUESTAS DEL BOT
=========================== */
function responder(texto) {
  texto = texto.toLowerCase();

  let r = "";

  // Vectores
  if (texto.includes("magnitud")) {
    r = "La magnitud de un vector (x, y, z) es: âˆš(xÂ² + yÂ² + zÂ²).";
  }
  else if (texto.includes("unitario")) {
    r = "Un vector unitario es u = v / |v|.";
  }
  else if (texto.includes("punto")) {
    r = "El producto punto es: aÂ·b = axÂ·bx + ayÂ·by + azÂ·bz.";
  }
  else if (texto.includes("cruz")) {
    r = "El producto cruz genera un vector perpendicular a ambos.";
  }
  else if (texto.includes("recta")) {
    r = "La ecuaciÃ³n de la recta en 3D es: r = râ‚€ + tÂ·v.";
  }
  else if (texto.includes("plano")) {
    r = "EcuaciÃ³n del plano: Ax + By + Cz + D = 0.";
  }

  // ParÃ¡bolas
  else if (texto.includes("parabola") || texto.includes("parÃ¡bola")) {
    r = "Una parÃ¡bola tiene forma y = axÂ² + bx + c.";
  }

  // ParamÃ©tricas
  else if (texto.includes("parametr")) {
    r = "Una curva paramÃ©trica se escribe como (x(t), y(t)).";
  }

  // Polares
  else if (texto.includes("polar")) {
    r = "ConversiÃ³n polar â†’ cartesiana: x = r cosÎ¸, y = r sinÎ¸.";
  }

  // Saludos / bÃ¡sico
  else if (texto.includes("hola")) {
    r = "Â¡Hola! Â¿En quÃ© parte del cÃ¡lculo vectorial te ayudo? ğŸ˜„";
  }
  else if (texto.includes("gracias")) {
    r = "Â¡Con gusto, bro! AquÃ­ estoy para ayudarte ğŸ’ªğŸ™‚";
  }
  else if (texto.includes("quien eres")) {
    r = "Soy tu asistente matemÃ¡tico personalizado ğŸ˜ğŸ¤–";
  }
  else if (texto.includes("ayuda")) {
    r = "Puedes preguntarme sobre vectores, rectas, planos, paramÃ©tricas y polares.";
  }

  // Si no reconoce
  else {
    r = "No entendÃ­ muy bien ğŸ˜… pero puedo ayudarte con vectores, rectas, planos, paramÃ©tricas, polares y mÃ¡s.";
  }

  mostrarMensaje(r, "bot");
}

</script>

</body>
</html>
